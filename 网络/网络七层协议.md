# OSI协议
OSI是一个开放性的通信系统互连参考模型，他是一个定义得非常好的协议规范。  
OSI有七层:
1. 物理层
2. 数据链路层
3. 网络层
4. 传输层
5. 会话层
6. 表示层
7. 应用层
# TCP/IP模型
1. 链路层
2. 网络层
3. 传输层
4. 应用层

## 应用层
负责应用程序间的数据沟通,有ssh,http,ftp,TLS/SSL等  
由应用程序提供
## 传输层与网络层
传输层包括:TCP,UDP,UDP-Lite,SCTP,DCCP等
网络层包括:ARP,IP,ICMP等
由操作系统提供

### IP协议
主机:具有ip地址,当是不进行路由控制的设备
路由器:具有ip也能进行路由转换

RFC1918私有ip地址规定:
- 10.*
- 172.16.*-172.31.*
- 192.168.*
#### 路由选择
- 当ip数据包，到达路由器时，路由器会先查看目的ip
- 路由器会决定这个数据包是直接发送给目标主机还是下一个路由器
- 依次反复，直到到达目标地址
当主机发送数据时候，首先将数据发送到网关地址上（路由器的地址）路由器对数据进行解析。
拿目的地址和路由表中的各个信息进行比对，选择通过哪个网卡发送。
如果比对出来的网络号和自己组建的局域网网络号相同，则通过自己网关地址发送到相应主机，如果跟路由表中的所有信息都对比失败则通过WAN口将数据发送给自己的上层网关（路由器的上层路由器）

### ARP协议
介于网络层和数据链路层之间的协议.  
OSI模型把网络工作分为七层，IP地址在OSI模型的第三层，MAC地址在第二层，彼此不直接打交道。在通过以太网发送IP数据包时，需要先封装第三层（32位IP地址）、第二层（48位MAC地址）的报头.  
使用于知道ip而不知道MAC地址的情况,通过IP地址获取mac地址.  
```
//硬件类型：指明了发送方想知道的硬件接口类型，以太网的值为1
Hardware type: Ethernet (1)
//协议类型：指明了发送方提供的高层协议类型，IP为0800（16进制）
Protocol type: IPv4 (0x0800)
//硬件地址长度和协议长度：指明了硬件地址和高层协议地址的长度，这样ARP报文就可以在任意硬件和任意协议的网络中使用
Hardware size: 6
Protocol size: 4
//操作类型：用来表示这个报文的类型，ARP请求为1，ARP响应为2，RARP请求为3，RARP响应为4
Opcode: request (1)
//发送方硬件地址：源主机硬件地址的后3个字节
Sender MAC address: Fenglian_48:1d:1f (a4:56:02:48:1d:1f)
//发送方IP地址: 源主机硬件地址的后2个字节；
Sender IP address: 192.168.0.1
//目标硬件地址：目的主机硬件地址的后4个字节
Target MAC address: 00:00:00_00:00:00 (00:00:00:00:00:00)
//目标IP地址（0-3字节）：目的主机的IP地址
Target IP address: 10.21.161.149
```
### SSDP
用于发现局域网中的设备
```
//消息头
M-SEARCH * HTTP/1.1
//广播地址和端口
HOST: 239.255.255.250:1900
//固定
MAN: "ssdp:discover"
//最长等待时间
MX: 5
//查询目标
ST: ssdp:all
```
ST有三种
- upnp:rootdevice 仅搜索网络中的根设备 
- uuid:device-UUID 查询UUID标识的设备 
- urn:schemas-upnp-org:device:device-Type:version 查询device-Type字段指定的设备类型，设备类型和版本由UPNP组织定义。 

## 网卡层
设备驱动程序与网络接口

## 设备
- 集线器:物理层
- 交换机:物理层,链路层
- 路由器:物理层,链路层,网络层
- pc:物理层,链路层,网络层,应用层