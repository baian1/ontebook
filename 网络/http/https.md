# 建立连接
连接建立过程是使用非对称密钥进行建立的

## 没有证书
1. 客户端向服务器索取公钥(明文)
2. 客户端产生一个对称密钥,使用公钥加密后给服务器
3. 服务器用私钥解析出对称密钥，用来对客户端发送信息解密
4. 客户端和服务端使用相同的对称密钥加密解密数据

## 中间人劫持
中间人可以向客户端伪装服务端，向服务端伪装客户端，这样子我们的数据在中间人那里是完全透明的

## 数字证书
既然有人伪装我们服务端，那么我们服务端就给自己的信息加上签名，表面是自己发送的  

数组证书包含了服务器公钥，证书签名算法，证书颁发者...还有最重要的数字签名，表面这个身份证是由我们发的  
由权威的CA机构发放，是你在互联网上的身份证

证书的生成：
1. 将我的信息发给CA公司
2. 公司将我的信息备案
3. 公司对我的信息整理成证书，并用CA的私钥加密出签名发放给我

## 有数字证书的认证
1. 客户端向服务器索取证书(证书里有公钥等信息)
2. 服务端发送证书
3. 客户端使用知名CA机构的公钥解析出签名，来判断这个证书是不是合法的(合法性由CA认证)，相当于你找公安局去问，这个人是不是那个叫XXX的人
4. 使用正确的公钥发送对称密钥

密钥生成：
1. 客户端发送一个随机数给服务器
2. 服务器对客户端的随机数使用特停算法运算
3. 服务端返回运算结果给客户端
4. 客户端用自己的随机数和计算过的随机数生成一个pre-master
5. 客户端利用三个数生成对称密钥enc_key