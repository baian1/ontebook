# 二进制分帧层
HTTP/2 将所有传输的信息分割为更小的消息和帧，并采用二进制格式对它们编码
- HEADERS frame
- DATA frame

- 数据流：已建立的连接内的双向字节流，可以承载一条或多条消息。
- 消息：与逻辑请求或响应消息对应的完整的一系列帧。
- 帧：HTTP/2 通信的最小单位，每个帧都包含帧头，至少也会标识出当前帧所属的数据流。

# 请求和响应的多路复用
HTTP/2通过将信息拆分成帧,通过在另一端重组,实现了在一条链接中传输多个请求,接收响应

- 并行交错发送多个请求
- 并行交错接收多个响应
- 使用单个链接并行多个请求和响应
- 通过消除不必要的延迟并提高可用网络容量的利用率，缩短页面加载时间

# 数据流优先级
- 可以向每个数据流分配一个介于 1 至 256 之间的整数。同级的权重越高分配的资源越多
- 每个数据流与其他数据流之间可以存在显式依赖关系。存在以来的数据流需要依赖数据流完成资源分配后，他才能获得数据流

# 标头压缩
1. 它允许通过静态霍夫曼代码对发送的报头字段进行编码，这减少了它们各自的传输大小。
2. 它要求客户端和服务器都维护和更新先前看到的头字段的索引列表（即，建立共享压缩上下文），然后将其用作有效编码先前传输的值的参考。

# 服务器推送
http/1.x的资源请求方式都是通过 请求->响应来实现的  
现在http/2可以根据请求,主动发送与请求相关的资源

nginx实现
```
location / {
  root   /usr/share/nginx/html;
  index  index.html index.htm;
  http2_push /style.css;
  http2_push /example.png;
}
```

通过修改响应头实现
```
http2_push_preload on;
location = / {
    proxy_pass http://upstream;
}
//响应头
Link: </styles.css>; rel=preload; as=style, </example.png>; rel=preload; as=image

//为避免重复推送资源,可以设置cookie来确认是否要推送资源
```